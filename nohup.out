2019-02-16 23:16:57,015 - tg_companion - INFO - MODULES to load: ['afk', 'chats', 'gbans', 'github', 'migrate', 'misc', 'private_msg', 'profanity_filter', 'profile', 'stats', 'terminals'] 
2019-02-16 23:16:57,016 - tg_companion - INFO - Loading Plugin: getinstalledplugins
2019-02-16 23:16:58,443 - telethon.crypto.aes - INFO - cryptg detected, it will be used for encryption
2019-02-16 23:17:01,595 - tg_companion - INFO - Starting TelegramCompanion
2019-02-16 23:17:01,641 - telethon.network.mtprotosender - INFO - Connecting to 149.154.167.92:443/TcpFull...
2019-02-16 23:17:01,790 - telethon.network.mtprotosender - INFO - Connection to 149.154.167.92:443/TcpFull complete!
2019-02-16 23:17:02,399 - tg_companion - INFO - Connected!!
Traceback (most recent call last):
  File "/usr/lib/python3.6/runpy.py", line 193, in _run_module_as_main
    "__main__", mod_spec)
  File "/usr/lib/python3.6/runpy.py", line 85, in _run_code
    exec(code, run_globals)
  File "/home/nitan_marcel/TelegramCompanion/tg_companion/__main__.py", line 12, in <module>
    "tg_companion.modules." + module_name)
  File "/usr/lib/python3.6/importlib/__init__.py", line 126, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
  File "<frozen importlib._bootstrap>", line 994, in _gcd_import
  File "<frozen importlib._bootstrap>", line 971, in _find_and_load
  File "<frozen importlib._bootstrap>", line 955, in _find_and_load_unlocked
  File "<frozen importlib._bootstrap>", line 665, in _load_unlocked
  File "<frozen importlib._bootstrap_external>", line 678, in exec_module
  File "<frozen importlib._bootstrap>", line 219, in _call_with_frames_removed
  File "/home/nitan_marcel/TelegramCompanion/tg_companion/modules/profanity_filter.py", line 2, in <module>
    from profanity_check import predict
ModuleNotFoundError: No module named 'profanity_check'
2019-02-16 23:31:20,612 - tg_companion - INFO - MODULES to load: ['afk', 'chats', 'gbans', 'github', 'migrate', 'misc', 'private_msg', 'profanity_filter', 'profile', 'stats', 'terminals'] 
2019-02-16 23:31:20,613 - tg_companion - INFO - Loading Plugin: getinstalledplugins
2019-02-16 23:31:20,789 - telethon.crypto.aes - INFO - cryptg detected, it will be used for encryption
2019-02-16 23:31:21,924 - tg_companion - INFO - Starting TelegramCompanion
2019-02-16 23:31:21,972 - telethon.network.mtprotosender - INFO - Connecting to 149.154.167.92:443/TcpFull...
2019-02-16 23:31:22,120 - telethon.network.mtprotosender - INFO - Connection to 149.154.167.92:443/TcpFull complete!
2019-02-16 23:31:22,715 - tg_companion - INFO - Connected!!
Traceback (most recent call last):
  File "/usr/lib/python3.6/runpy.py", line 193, in _run_module_as_main
    "__main__", mod_spec)
  File "/usr/lib/python3.6/runpy.py", line 85, in _run_code
    exec(code, run_globals)
  File "/home/nitan_marcel/TelegramCompanion/tg_companion/__main__.py", line 12, in <module>
    "tg_companion.modules." + module_name)
  File "/usr/lib/python3.6/importlib/__init__.py", line 126, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
  File "<frozen importlib._bootstrap>", line 994, in _gcd_import
  File "<frozen importlib._bootstrap>", line 971, in _find_and_load
  File "<frozen importlib._bootstrap>", line 955, in _find_and_load_unlocked
  File "<frozen importlib._bootstrap>", line 665, in _load_unlocked
  File "<frozen importlib._bootstrap_external>", line 678, in exec_module
  File "<frozen importlib._bootstrap>", line 219, in _call_with_frames_removed
  File "/home/nitan_marcel/TelegramCompanion/tg_companion/modules/profanity_filter.py", line 2, in <module>
    from profanity_check import predict
ModuleNotFoundError: No module named 'profanity_check'
2019-02-16 23:33:07,319 - tg_companion - INFO - MODULES to load: ['afk', 'chats', 'gbans', 'github', 'migrate', 'misc', 'private_msg', 'profanity_filter', 'profile', 'stats', 'terminals'] 
2019-02-16 23:33:07,357 - tg_companion - INFO - Loading Plugin: getinstalledplugins
2019-02-16 23:33:08,557 - telethon.crypto.aes - INFO - cryptg detected, it will be used for encryption
2019-02-16 23:33:11,654 - tg_companion - INFO - Starting TelegramCompanion
2019-02-16 23:33:11,697 - telethon.network.mtprotosender - INFO - Connecting to 149.154.167.92:443/TcpFull...
2019-02-16 23:33:11,844 - telethon.network.mtprotosender - INFO - Connection to 149.154.167.92:443/TcpFull complete!
2019-02-16 23:33:12,438 - tg_companion - INFO - Connected!!
2019-02-16 23:33:18,255 - tg_companion - INFO - Your userbot is running. Type .ping in any chat to test it
2019-02-16 23:33:19,287 - tg_companion - INFO - Updating Stats...
2019-02-16 23:33:19,287 - tg_companion - INFO - The companion may not respond to your command for 5 second. Don't panic and try again if your command didn't worked
                                                                               N/A% (0 of 49) |                         | Elapsed Time: 0:00:00 ETA:  --:--:--                                                                               100% (49 of 49) |########################| Elapsed Time: 0:00:06 Time:  0:00:06
2019-02-16 23:33:57,383 - telethon.client.users - INFO - Sleeping for 11s on flood wait
2019-02-16 23:34:29,490 - telethon.client.users - INFO - Sleeping for 9s on flood wait
2019-02-16 23:34:58,768 - tg_companion - INFO - DONE!! You can see your stats by sending .stats in any chat
2019-02-17 00:29:34,942 - telethon.client.uploads - INFO - Uploading file of 92134 bytes in 1 chunks of 131072
2019-02-17 00:31:10,672 - telethon.network.mtprotosender - INFO - Disconnecting from 149.154.167.92:443/TcpFull...
2019-02-17 00:31:10,673 - telethon.network.mtprotosender - INFO - Disconnection from 149.154.167.92:443/TcpFull complete!
Traceback (most recent call last):
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/telethon/client/updates.py", line 34, in run_until_disconnected
    return self.loop.run_until_complete(self.disconnected)
  File "/usr/lib/python3.7/asyncio/base_events.py", line 571, in run_until_complete
    self.run_forever()
  File "/usr/lib/python3.7/asyncio/base_events.py", line 539, in run_forever
    self._run_once()
  File "/usr/lib/python3.7/asyncio/base_events.py", line 1739, in _run_once
    event_list = self._selector.select(timeout)
  File "/usr/lib/python3.7/selectors.py", line 468, in select
    fd_event_list = self._selector.poll(timeout, max_ev)
KeyboardInterrupt

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1236, in _execute_context
    cursor, statement, parameters, context
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/engine/default.py", line 536, in do_execute
    cursor.execute(statement, parameters)
psycopg2.ProgrammingError: column "date" is of type timestamp without time zone but expression is of type numeric
LINE 1: ..., unread_count) VALUES ('tg_userbot', 0, 1017, 0, 1550356260...
                                                             ^
HINT:  You will need to rewrite or cast the expression.


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/usr/lib/python3.7/runpy.py", line 193, in _run_module_as_main
    "__main__", mod_spec)
  File "/usr/lib/python3.7/runpy.py", line 85, in _run_code
    exec(code, run_globals)
  File "/home/nitan_marcel/TelegramCompanion/tg_companion/__main__.py", line 63, in <module>
    client.run_until_disconnected()
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/telethon/client/updates.py", line 36, in run_until_disconnected
    self.disconnect()
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/telethon/client/telegrambaseclient.py", line 379, in disconnect
    self.session.set_update_state(0, self._state)
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/alchemysession/orm.py", line 63, in set_update_state
    self.save()
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/alchemysession/orm.py", line 82, in save
    self.container.save()
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/alchemysession/sqlalchemy.py", line 162, in save
    self.db.commit()
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/orm/scoping.py", line 162, in do
    return getattr(self.registry(), name)(*args, **kwargs)
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 1023, in commit
    self.transaction.commit()
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 487, in commit
    self._prepare_impl()
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 466, in _prepare_impl
    self.session.flush()
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 2436, in flush
    self._flush(objects)
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 2574, in _flush
    transaction.rollback(_capture_exception=True)
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/util/langhelpers.py", line 67, in __exit__
    compat.reraise(exc_type, exc_value, exc_tb)
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/util/compat.py", line 277, in reraise
    raise value
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 2534, in _flush
    flush_context.execute()
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/orm/unitofwork.py", line 416, in execute
    rec.execute(self)
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/orm/unitofwork.py", line 583, in execute
    uow,
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/orm/persistence.py", line 245, in save_obj
    insert,
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/orm/persistence.py", line 1063, in _emit_insert_statements
    c = cached_connections[connection].execute(statement, multiparams)
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 980, in execute
    return meth(self, multiparams, params)
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/sql/elements.py", line 273, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1099, in _execute_clauseelement
    distilled_params,
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1240, in _execute_context
    e, statement, parameters, cursor, context
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1458, in _handle_dbapi_exception
    util.raise_from_cause(sqlalchemy_exception, exc_info)
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/util/compat.py", line 296, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb, cause=cause)
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/util/compat.py", line 276, in reraise
    raise value.with_traceback(tb)
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1236, in _execute_context
    cursor, statement, parameters, context
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/engine/default.py", line 536, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.ProgrammingError) column "date" is of type timestamp without time zone but expression is of type numeric
LINE 1: ..., unread_count) VALUES ('tg_userbot', 0, 1017, 0, 1550356260...
                                                             ^
HINT:  You will need to rewrite or cast the expression.
 [SQL: 'INSERT INTO update_state (session_id, entity_id, pts, qts, date, seq, unread_count) VALUES (%(session_id)s, %(entity_id)s, %(pts)s, %(qts)s, %(date)s, %(seq)s, %(unread_count)s)'] [parameters: {'session_id': 'tg_userbot', 'entity_id': 0, 'pts': 1017, 'qts': 0, 'date': 1550356260.0, 'seq': 9851, 'unread_count': 17}] (Background on this error at: http://sqlalche.me/e/f405)
Counting your chats...
2019-02-17 00:33:48,620 - tg_companion - INFO - MODULES to load: ['afk', 'chats', 'gbans', 'github', 'migrate', 'misc', 'private_msg', 'profanity_filter', 'profile', 'stats', 'terminals'] 
2019-02-17 00:33:48,621 - tg_companion - INFO - Loading Plugin: getinstalledplugins
2019-02-17 00:33:48,763 - telethon.crypto.aes - INFO - cryptg detected, it will be used for encryption
2019-02-17 00:33:49,873 - tg_companion - INFO - Starting TelegramCompanion
2019-02-17 00:33:49,918 - telethon.network.mtprotosender - INFO - Connecting to 149.154.167.92:443/TcpFull...
2019-02-17 00:33:50,066 - telethon.network.mtprotosender - INFO - Connection to 149.154.167.92:443/TcpFull complete!
2019-02-17 00:33:50,211 - telethon.network.connection.connection - INFO - The server closed the connection
2019-02-17 00:33:50,212 - telethon.network.mtprotosender - INFO - Connection closed while receiving data
2019-02-17 00:33:50,212 - telethon.network.mtprotosender - INFO - Connecting to 149.154.167.92:443/TcpFull...
2019-02-17 00:33:50,358 - telethon.network.mtprotosender - INFO - Connection to 149.154.167.92:443/TcpFull complete!
2019-02-17 00:33:50,359 - telethon.client.updates - INFO - Asking for the current state after reconnect...
2019-02-17 00:33:50,678 - telethon.client.updates - INFO - Got new state! State(pts=143670, qts=0, date=datetime.datetime(2019, 2, 16, 22, 33, 50, tzinfo=datetime.timezone.utc), seq=9851, unread_count=17)
2019-02-17 00:33:50,812 - tg_companion - INFO - Connected!!
2019-02-17 00:33:55,061 - tg_companion - INFO - Your userbot is running. Type .ping in any chat to test it
2019-02-17 00:33:56,138 - tg_companion - INFO - Updating Stats...
2019-02-17 00:33:56,138 - tg_companion - INFO - The companion may not respond to your command for 5 second. Don't panic and try again if your command didn't worked
                                                                               N/A% (0 of 49) |                         | Elapsed Time: 0:00:00 ETA:  --:--:--                                                                               100% (49 of 49) |########################| Elapsed Time: 0:00:06 Time:  0:00:06
2019-02-17 00:34:35,164 - telethon.client.users - INFO - Sleeping for 10s on flood wait
2019-02-17 00:34:45,782 - telethon.network.mtprotosender - INFO - Disconnecting from 149.154.167.92:443/TcpFull...
2019-02-17 00:34:45,782 - telethon.network.mtprotosender - INFO - Disconnection from 149.154.167.92:443/TcpFull complete!
Traceback (most recent call last):
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/telethon/client/updates.py", line 34, in run_until_disconnected
    return self.loop.run_until_complete(self.disconnected)
  File "/usr/lib/python3.7/asyncio/base_events.py", line 571, in run_until_complete
    self.run_forever()
  File "/usr/lib/python3.7/asyncio/base_events.py", line 539, in run_forever
    self._run_once()
  File "/usr/lib/python3.7/asyncio/base_events.py", line 1775, in _run_once
    handle._run()
  File "/usr/lib/python3.7/asyncio/events.py", line 88, in _run
    self._context.run(self._callback, *self._args)
  File "/home/nitan_marcel/TelegramCompanion/tg_companion/tgclient.py", line 200, in wrapper
    await fcn()
  File "/home/nitan_marcel/TelegramCompanion/tg_companion/tgclient.py", line 213, in wrapper
    return await func(*args, **kwds)
  File "/home/nitan_marcel/TelegramCompanion/tg_companion/modules/stats.py", line 224, in GetStats
    msgs = await client.get_messages(ent, limit=0)
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/telethon/client/messages.py", line 364, in get_messages
    async for x in self.iter_messages(*args, **kwargs):
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/async_generator/_impl.py", line 366, in step
    return await ANextIter(self._it, start_fn, *args)
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/async_generator/_impl.py", line 199, in __next__
    return self._invoke(self._it.__next__)
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/async_generator/_impl.py", line 209, in _invoke
    result = fn(*args)
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/telethon/client/messages.py", line 240, in iter_messages
    result = await self(request)
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/telethon/client/users.py", line 60, in __call__
    self.session.process_entities(result)
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/alchemysession/orm.py", line 106, in process_entities
    self.save()
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/alchemysession/orm.py", line 82, in save
    self.container.save()
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/alchemysession/sqlalchemy.py", line 162, in save
    self.db.commit()
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/orm/scoping.py", line 162, in do
    return getattr(self.registry(), name)(*args, **kwargs)
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 1023, in commit
    self.transaction.commit()
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 491, in commit
    t[1].commit()
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1708, in commit
    self._do_commit()
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1739, in _do_commit
    self.connection._commit_impl()
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 755, in _commit_impl
    self._handle_dbapi_exception(e, None, None, None, None)
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1460, in _handle_dbapi_exception
    util.reraise(*exc_info)
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/util/compat.py", line 277, in reraise
    raise value
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 753, in _commit_impl
    self.engine.dialect.do_commit(self.connection)
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/engine/default.py", line 489, in do_commit
    dbapi_connection.commit()
KeyboardInterrupt

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/lib/python3.7/runpy.py", line 193, in _run_module_as_main
    "__main__", mod_spec)
  File "/usr/lib/python3.7/runpy.py", line 85, in _run_code
    exec(code, run_globals)
  File "/home/nitan_marcel/TelegramCompanion/tg_companion/__main__.py", line 63, in <module>
    client.run_until_disconnected()
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/telethon/client/updates.py", line 36, in run_until_disconnected
    self.disconnect()
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/telethon/client/telegrambaseclient.py", line 379, in disconnect
    self.session.set_update_state(0, self._state)
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/alchemysession/orm.py", line 62, in set_update_state
    unread_count=row.unread_count))
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/orm/scoping.py", line 162, in do
    return getattr(self.registry(), name)(*args, **kwargs)
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 2077, in merge
    _resolve_conflict_map=_resolve_conflict_map,
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 2143, in _merge
    merged = self.query(mapper.class_).get(key[1])
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 936, in get
    return self._get_impl(ident, loading.load_on_pk_identity)
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 1026, in _get_impl
    return db_load_fn(self, primary_key_identity)
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/orm/loading.py", line 282, in load_on_pk_identity
    return q.one()
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 3039, in one
    ret = self.one_or_none()
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 3008, in one_or_none
    ret = list(self)
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 3081, in __iter__
    return self._execute_and_instances(context)
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 3103, in _execute_and_instances
    querycontext, self._connection_from_session, close_with_result=True
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 3111, in _get_bind_args
    mapper=self._bind_mapper(), clause=querycontext.statement, **kw
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 3096, in _connection_from_session
    conn = self.session.connection(**kw)
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 1120, in connection
    execution_options=execution_options,
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 1126, in _connection_for_bind
    engine, execution_options
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 401, in _connection_for_bind
    self._assert_active()
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 276, in _assert_active
    "This session is in 'prepared' state; no further "
sqlalchemy.exc.InvalidRequestError: This session is in 'prepared' state; no further SQL can be emitted within this transaction.
Counting your chats...
2019-02-17 00:34:46,151 - asyncio - ERROR - Task exception was never retrieved
future: <Task finished coro=<CompanionClient.on_timer.<locals>.decorator.<locals>.wrapper() done, defined at /home/nitan_marcel/TelegramCompanion/tg_companion/tgclient.py:194> exception=KeyboardInterrupt()>
Traceback (most recent call last):
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/telethon/client/updates.py", line 34, in run_until_disconnected
    return self.loop.run_until_complete(self.disconnected)
  File "/usr/lib/python3.7/asyncio/base_events.py", line 571, in run_until_complete
    self.run_forever()
  File "/usr/lib/python3.7/asyncio/base_events.py", line 539, in run_forever
    self._run_once()
  File "/usr/lib/python3.7/asyncio/base_events.py", line 1775, in _run_once
    handle._run()
  File "/usr/lib/python3.7/asyncio/events.py", line 88, in _run
    self._context.run(self._callback, *self._args)
  File "/home/nitan_marcel/TelegramCompanion/tg_companion/tgclient.py", line 200, in wrapper
    await fcn()
  File "/home/nitan_marcel/TelegramCompanion/tg_companion/tgclient.py", line 213, in wrapper
    return await func(*args, **kwds)
  File "/home/nitan_marcel/TelegramCompanion/tg_companion/modules/stats.py", line 224, in GetStats
    msgs = await client.get_messages(ent, limit=0)
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/telethon/client/messages.py", line 364, in get_messages
    async for x in self.iter_messages(*args, **kwargs):
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/async_generator/_impl.py", line 366, in step
    return await ANextIter(self._it, start_fn, *args)
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/async_generator/_impl.py", line 199, in __next__
    return self._invoke(self._it.__next__)
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/async_generator/_impl.py", line 209, in _invoke
    result = fn(*args)
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/telethon/client/messages.py", line 240, in iter_messages
    result = await self(request)
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/telethon/client/users.py", line 60, in __call__
    self.session.process_entities(result)
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/alchemysession/orm.py", line 106, in process_entities
    self.save()
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/alchemysession/orm.py", line 82, in save
    self.container.save()
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/alchemysession/sqlalchemy.py", line 162, in save
    self.db.commit()
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/orm/scoping.py", line 162, in do
    return getattr(self.registry(), name)(*args, **kwargs)
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 1023, in commit
    self.transaction.commit()
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 491, in commit
    t[1].commit()
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1708, in commit
    self._do_commit()
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1739, in _do_commit
    self.connection._commit_impl()
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 755, in _commit_impl
    self._handle_dbapi_exception(e, None, None, None, None)
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1460, in _handle_dbapi_exception
    util.reraise(*exc_info)
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/util/compat.py", line 277, in reraise
    raise value
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 753, in _commit_impl
    self.engine.dialect.do_commit(self.connection)
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/engine/default.py", line 489, in do_commit
    dbapi_connection.commit()
KeyboardInterrupt
2019-02-17 00:35:05,198 - tg_companion - INFO - MODULES to load: ['afk', 'chats', 'gbans', 'github', 'migrate', 'misc', 'private_msg', 'profanity_filter', 'profile', 'stats', 'terminals'] 
2019-02-17 00:35:05,198 - tg_companion - INFO - Loading Plugin: getinstalledplugins
2019-02-17 00:35:05,331 - telethon.crypto.aes - INFO - cryptg detected, it will be used for encryption
2019-02-17 00:35:06,384 - tg_companion - INFO - Starting TelegramCompanion
2019-02-17 00:35:06,428 - telethon.network.mtprotosender - INFO - Connecting to 149.154.167.92:443/TcpFull...
2019-02-17 00:35:06,575 - telethon.network.mtprotosender - INFO - Connection to 149.154.167.92:443/TcpFull complete!
2019-02-17 00:35:07,156 - tg_companion - INFO - Connected!!
2019-02-17 00:35:11,294 - tg_companion - INFO - Your userbot is running. Type .ping in any chat to test it
2019-02-17 00:35:12,327 - tg_companion - INFO - Updating Stats...
2019-02-17 00:35:12,327 - tg_companion - INFO - The companion may not respond to your command for 5 second. Don't panic and try again if your command didn't worked
                                                                               N/A% (0 of 49) |                         | Elapsed Time: 0:00:00 ETA:  --:--:--                                                                               100% (49 of 49) |########################| Elapsed Time: 0:00:06 Time:  0:00:06
2019-02-17 00:35:44,385 - telethon.client.updates - ERROR - Unhandled exception on wrapper
Traceback (most recent call last):
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1236, in _execute_context
    cursor, statement, parameters, context
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/engine/default.py", line 536, in do_execute
    cursor.execute(statement, parameters)
psycopg2.IntegrityError: duplicate key value violates unique constraint "gban_allowed_chats_pkey"
DETAIL:  Key (chat_id)=(1303629757) already exists.


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/telethon/client/updates.py", line 277, in _dispatch_update
    await callback(event)
  File "/home/nitan_marcel/TelegramCompanion/tg_companion/tgclient.py", line 213, in wrapper
    return await func(*args, **kwds)
  File "/home/nitan_marcel/TelegramCompanion/tg_companion/modules/gbans.py", line 259, in enable_gbans
    connection.execute(query)
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 980, in execute
    return meth(self, multiparams, params)
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/sql/elements.py", line 273, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1099, in _execute_clauseelement
    distilled_params,
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1240, in _execute_context
    e, statement, parameters, cursor, context
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1458, in _handle_dbapi_exception
    util.raise_from_cause(sqlalchemy_exception, exc_info)
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/util/compat.py", line 296, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb, cause=cause)
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/util/compat.py", line 276, in reraise
    raise value.with_traceback(tb)
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1236, in _execute_context
    cursor, statement, parameters, context
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/engine/default.py", line 536, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (psycopg2.IntegrityError) duplicate key value violates unique constraint "gban_allowed_chats_pkey"
DETAIL:  Key (chat_id)=(1303629757) already exists.
 [SQL: 'INSERT INTO gban_allowed_chats (chat_id, is_enabled) VALUES (%(chat_id)s, %(is_enabled)s)'] [parameters: {'chat_id': 1303629757, 'is_enabled': True}] (Background on this error at: http://sqlalche.me/e/gkpj)
2019-02-17 00:35:50,986 - telethon.client.users - INFO - Sleeping for 10s on flood wait
2019-02-17 00:36:08,784 - telethon.client.updates - ERROR - Unhandled exception on wrapper
Traceback (most recent call last):
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1236, in _execute_context
    cursor, statement, parameters, context
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/engine/default.py", line 536, in do_execute
    cursor.execute(statement, parameters)
psycopg2.IntegrityError: duplicate key value violates unique constraint "gban_allowed_chats_pkey"
DETAIL:  Key (chat_id)=(1303629757) already exists.


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/telethon/client/updates.py", line 277, in _dispatch_update
    await callback(event)
  File "/home/nitan_marcel/TelegramCompanion/tg_companion/tgclient.py", line 213, in wrapper
    return await func(*args, **kwds)
  File "/home/nitan_marcel/TelegramCompanion/tg_companion/modules/gbans.py", line 259, in enable_gbans
    connection.execute(query)
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 980, in execute
    return meth(self, multiparams, params)
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/sql/elements.py", line 273, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1099, in _execute_clauseelement
    distilled_params,
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1240, in _execute_context
    e, statement, parameters, cursor, context
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1458, in _handle_dbapi_exception
    util.raise_from_cause(sqlalchemy_exception, exc_info)
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/util/compat.py", line 296, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb, cause=cause)
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/util/compat.py", line 276, in reraise
    raise value.with_traceback(tb)
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1236, in _execute_context
    cursor, statement, parameters, context
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/engine/default.py", line 536, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (psycopg2.IntegrityError) duplicate key value violates unique constraint "gban_allowed_chats_pkey"
DETAIL:  Key (chat_id)=(1303629757) already exists.
 [SQL: 'INSERT INTO gban_allowed_chats (chat_id, is_enabled) VALUES (%(chat_id)s, %(is_enabled)s)'] [parameters: {'chat_id': 1303629757, 'is_enabled': True}] (Background on this error at: http://sqlalche.me/e/gkpj)
2019-02-17 00:36:21,355 - telethon.client.users - INFO - Sleeping for 10s on flood wait
2019-02-17 00:36:41,863 - telethon.client.updates - ERROR - Unhandled exception on wrapper
Traceback (most recent call last):
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1236, in _execute_context
    cursor, statement, parameters, context
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/engine/default.py", line 536, in do_execute
    cursor.execute(statement, parameters)
psycopg2.IntegrityError: duplicate key value violates unique constraint "gban_allowed_chats_pkey"
DETAIL:  Key (chat_id)=(1303629757) already exists.


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/telethon/client/updates.py", line 277, in _dispatch_update
    await callback(event)
  File "/home/nitan_marcel/TelegramCompanion/tg_companion/tgclient.py", line 213, in wrapper
    return await func(*args, **kwds)
  File "/home/nitan_marcel/TelegramCompanion/tg_companion/modules/gbans.py", line 259, in enable_gbans
    connection.execute(query)
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 980, in execute
    return meth(self, multiparams, params)
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/sql/elements.py", line 273, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1099, in _execute_clauseelement
    distilled_params,
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1240, in _execute_context
    e, statement, parameters, cursor, context
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1458, in _handle_dbapi_exception
    util.raise_from_cause(sqlalchemy_exception, exc_info)
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/util/compat.py", line 296, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb, cause=cause)
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/util/compat.py", line 276, in reraise
    raise value.with_traceback(tb)
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1236, in _execute_context
    cursor, statement, parameters, context
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/engine/default.py", line 536, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (psycopg2.IntegrityError) duplicate key value violates unique constraint "gban_allowed_chats_pkey"
DETAIL:  Key (chat_id)=(1303629757) already exists.
 [SQL: 'INSERT INTO gban_allowed_chats (chat_id, is_enabled) VALUES (%(chat_id)s, %(is_enabled)s)'] [parameters: {'chat_id': 1303629757, 'is_enabled': True}] (Background on this error at: http://sqlalche.me/e/gkpj)
2019-02-17 00:36:50,906 - tg_companion - INFO - DONE!! You can see your stats by sending .stats in any chat
2019-02-17 00:36:53,382 - telethon.network.mtprotosender - INFO - Disconnecting from 149.154.167.92:443/TcpFull...
2019-02-17 00:36:53,382 - telethon.network.mtprotosender - INFO - Disconnection from 149.154.167.92:443/TcpFull complete!
Traceback (most recent call last):
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/telethon/client/updates.py", line 34, in run_until_disconnected
    return self.loop.run_until_complete(self.disconnected)
  File "/usr/lib/python3.7/asyncio/base_events.py", line 571, in run_until_complete
    self.run_forever()
  File "/usr/lib/python3.7/asyncio/base_events.py", line 539, in run_forever
    self._run_once()
  File "/usr/lib/python3.7/asyncio/base_events.py", line 1739, in _run_once
    event_list = self._selector.select(timeout)
  File "/usr/lib/python3.7/selectors.py", line 468, in select
    fd_event_list = self._selector.poll(timeout, max_ev)
KeyboardInterrupt

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1236, in _execute_context
    cursor, statement, parameters, context
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/engine/default.py", line 536, in do_execute
    cursor.execute(statement, parameters)
psycopg2.ProgrammingError: column "date" is of type timestamp without time zone but expression is of type numeric
LINE 1: ..., unread_count) VALUES ('tg_userbot', 0, 1028, 0, 1550356608...
                                                             ^
HINT:  You will need to rewrite or cast the expression.


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/usr/lib/python3.7/runpy.py", line 193, in _run_module_as_main
    "__main__", mod_spec)
  File "/usr/lib/python3.7/runpy.py", line 85, in _run_code
    exec(code, run_globals)
  File "/home/nitan_marcel/TelegramCompanion/tg_companion/__main__.py", line 63, in <module>
    client.run_until_disconnected()
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/telethon/client/updates.py", line 36, in run_until_disconnected
    self.disconnect()
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/telethon/client/telegrambaseclient.py", line 379, in disconnect
    self.session.set_update_state(0, self._state)
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/alchemysession/orm.py", line 63, in set_update_state
    self.save()
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/alchemysession/orm.py", line 82, in save
    self.container.save()
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/alchemysession/sqlalchemy.py", line 162, in save
    self.db.commit()
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/orm/scoping.py", line 162, in do
    return getattr(self.registry(), name)(*args, **kwargs)
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 1023, in commit
    self.transaction.commit()
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 487, in commit
    self._prepare_impl()
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 466, in _prepare_impl
    self.session.flush()
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 2436, in flush
    self._flush(objects)
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 2574, in _flush
    transaction.rollback(_capture_exception=True)
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/util/langhelpers.py", line 67, in __exit__
    compat.reraise(exc_type, exc_value, exc_tb)
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/util/compat.py", line 277, in reraise
    raise value
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 2534, in _flush
    flush_context.execute()
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/orm/unitofwork.py", line 416, in execute
    rec.execute(self)
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/orm/unitofwork.py", line 583, in execute
    uow,
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/orm/persistence.py", line 245, in save_obj
    insert,
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/orm/persistence.py", line 1063, in _emit_insert_statements
    c = cached_connections[connection].execute(statement, multiparams)
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 980, in execute
    return meth(self, multiparams, params)
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/sql/elements.py", line 273, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1099, in _execute_clauseelement
    distilled_params,
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1240, in _execute_context
    e, statement, parameters, cursor, context
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1458, in _handle_dbapi_exception
    util.raise_from_cause(sqlalchemy_exception, exc_info)
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/util/compat.py", line 296, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb, cause=cause)
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/util/compat.py", line 276, in reraise
    raise value.with_traceback(tb)
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1236, in _execute_context
    cursor, statement, parameters, context
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/engine/default.py", line 536, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.ProgrammingError) column "date" is of type timestamp without time zone but expression is of type numeric
LINE 1: ..., unread_count) VALUES ('tg_userbot', 0, 1028, 0, 1550356608...
                                                             ^
HINT:  You will need to rewrite or cast the expression.
 [SQL: 'INSERT INTO update_state (session_id, entity_id, pts, qts, date, seq, unread_count) VALUES (%(session_id)s, %(entity_id)s, %(pts)s, %(qts)s, %(date)s, %(seq)s, %(unread_count)s)'] [parameters: {'session_id': 'tg_userbot', 'entity_id': 0, 'pts': 1028, 'qts': 0, 'date': 1550356608.0, 'seq': 9867, 'unread_count': 17}] (Background on this error at: http://sqlalche.me/e/f405)
Counting your chats...
2019-02-17 00:41:16,208 - tg_companion - INFO - MODULES to load: ['afk', 'chats', 'gbans', 'github', 'migrate', 'misc', 'private_msg', 'profanity_filter', 'profile', 'stats', 'terminals'] 
2019-02-17 00:41:16,209 - tg_companion - INFO - Loading Plugin: getinstalledplugins
2019-02-17 00:41:16,338 - telethon.crypto.aes - INFO - cryptg detected, it will be used for encryption
2019-02-17 00:41:17,350 - tg_companion - INFO - Starting TelegramCompanion
2019-02-17 00:41:17,392 - telethon.network.mtprotosender - INFO - Connecting to 149.154.167.92:443/TcpFull...
2019-02-17 00:41:17,540 - telethon.network.mtprotosender - INFO - Connection to 149.154.167.92:443/TcpFull complete!
2019-02-17 00:41:18,121 - tg_companion - INFO - Connected!!
2019-02-17 00:41:22,395 - tg_companion - INFO - Your userbot is running. Type .ping in any chat to test it
2019-02-17 00:41:23,452 - tg_companion - INFO - Updating Stats...
2019-02-17 00:41:23,452 - tg_companion - INFO - The companion may not respond to your command for 5 second. Don't panic and try again if your command didn't worked
                                                                               N/A% (0 of 49) |                         | Elapsed Time: 0:00:00 ETA:  --:--:--                                                                               100% (49 of 49) |########################| Elapsed Time: 0:00:06 Time:  0:00:06
2019-02-17 00:42:00,795 - telethon.client.users - INFO - Sleeping for 11s on flood wait
2019-02-17 00:42:31,392 - telethon.client.users - INFO - Sleeping for 10s on flood wait
2019-02-17 00:43:00,975 - tg_companion - INFO - DONE!! You can see your stats by sending .stats in any chat
2019-02-17 01:42:56,721 - telethon.network.mtprotosender - INFO - Disconnecting from 149.154.167.92:443/TcpFull...
2019-02-17 01:42:56,722 - telethon.network.mtprotosender - INFO - Disconnection from 149.154.167.92:443/TcpFull complete!
Traceback (most recent call last):
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/telethon/client/updates.py", line 34, in run_until_disconnected
    return self.loop.run_until_complete(self.disconnected)
  File "/usr/lib/python3.7/asyncio/base_events.py", line 571, in run_until_complete
    self.run_forever()
  File "/usr/lib/python3.7/asyncio/base_events.py", line 539, in run_forever
    self._run_once()
  File "/usr/lib/python3.7/asyncio/base_events.py", line 1739, in _run_once
    event_list = self._selector.select(timeout)
  File "/usr/lib/python3.7/selectors.py", line 468, in select
    fd_event_list = self._selector.poll(timeout, max_ev)
KeyboardInterrupt

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1236, in _execute_context
    cursor, statement, parameters, context
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/engine/default.py", line 536, in do_execute
    cursor.execute(statement, parameters)
psycopg2.ProgrammingError: column "date" is of type timestamp without time zone but expression is of type numeric
LINE 1: ...unread_count) VALUES ('tg_userbot', 0, 231057, 0, 1550360575...
                                                             ^
HINT:  You will need to rewrite or cast the expression.


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/usr/lib/python3.7/runpy.py", line 193, in _run_module_as_main
    "__main__", mod_spec)
  File "/usr/lib/python3.7/runpy.py", line 85, in _run_code
    exec(code, run_globals)
  File "/home/nitan_marcel/TelegramCompanion/tg_companion/__main__.py", line 63, in <module>
    client.run_until_disconnected()
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/telethon/client/updates.py", line 36, in run_until_disconnected
    self.disconnect()
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/telethon/client/telegrambaseclient.py", line 379, in disconnect
    self.session.set_update_state(0, self._state)
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/alchemysession/orm.py", line 63, in set_update_state
    self.save()
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/alchemysession/orm.py", line 82, in save
    self.container.save()
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/alchemysession/sqlalchemy.py", line 162, in save
    self.db.commit()
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/orm/scoping.py", line 162, in do
    return getattr(self.registry(), name)(*args, **kwargs)
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 1023, in commit
    self.transaction.commit()
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 487, in commit
    self._prepare_impl()
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 466, in _prepare_impl
    self.session.flush()
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 2436, in flush
    self._flush(objects)
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 2574, in _flush
    transaction.rollback(_capture_exception=True)
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/util/langhelpers.py", line 67, in __exit__
    compat.reraise(exc_type, exc_value, exc_tb)
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/util/compat.py", line 277, in reraise
    raise value
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 2534, in _flush
    flush_context.execute()
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/orm/unitofwork.py", line 416, in execute
    rec.execute(self)
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/orm/unitofwork.py", line 583, in execute
    uow,
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/orm/persistence.py", line 245, in save_obj
    insert,
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/orm/persistence.py", line 1063, in _emit_insert_statements
    c = cached_connections[connection].execute(statement, multiparams)
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 980, in execute
    return meth(self, multiparams, params)
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/sql/elements.py", line 273, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1099, in _execute_clauseelement
    distilled_params,
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1240, in _execute_context
    e, statement, parameters, cursor, context
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1458, in _handle_dbapi_exception
    util.raise_from_cause(sqlalchemy_exception, exc_info)
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/util/compat.py", line 296, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb, cause=cause)
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/util/compat.py", line 276, in reraise
    raise value.with_traceback(tb)
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1236, in _execute_context
    cursor, statement, parameters, context
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/engine/default.py", line 536, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.ProgrammingError) column "date" is of type timestamp without time zone but expression is of type numeric
LINE 1: ...unread_count) VALUES ('tg_userbot', 0, 231057, 0, 1550360575...
                                                             ^
HINT:  You will need to rewrite or cast the expression.
 [SQL: 'INSERT INTO update_state (session_id, entity_id, pts, qts, date, seq, unread_count) VALUES (%(session_id)s, %(entity_id)s, %(pts)s, %(qts)s, %(date)s, %(seq)s, %(unread_count)s)'] [parameters: {'session_id': 'tg_userbot', 'entity_id': 0, 'pts': 231057, 'qts': 0, 'date': 1550360575.0, 'seq': 0, 'unread_count': 17}] (Background on this error at: http://sqlalche.me/e/f405)
Counting your chats...
2019-02-17 01:57:57,323 - tg_companion - INFO - MODULES to load: ['afk', 'chats', 'gbans', 'github', 'migrate', 'misc', 'private_msg', 'profanity_filter', 'profile', 'stats', 'terminals'] 
2019-02-17 01:57:57,323 - tg_companion - INFO - Loading Plugin: getinstalledplugins
2019-02-17 01:57:57,462 - telethon.crypto.aes - INFO - cryptg detected, it will be used for encryption
2019-02-17 01:57:58,562 - tg_companion - INFO - Starting TelegramCompanion
2019-02-17 01:57:58,606 - telethon.network.mtprotosender - INFO - Connecting to 149.154.167.92:443/TcpFull...
2019-02-17 01:57:58,762 - telethon.network.mtprotosender - INFO - Connection to 149.154.167.92:443/TcpFull complete!
2019-02-17 01:57:59,373 - tg_companion - INFO - Connected!!
2019-02-17 01:59:29,168 - tg_companion - INFO - Your userbot is running. Type .ping in any chat to test it
2019-02-17 01:59:30,207 - tg_companion - INFO - Updating Stats...
2019-02-17 01:59:30,207 - tg_companion - INFO - The companion may not respond to your command for 5 second. Don't panic and try again if your command didn't worked
2019-02-17 01:59:32,315 - telethon.client.updates - ERROR - Unhandled exception on py_execute
Traceback (most recent call last):
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/telethon/client/updates.py", line 277, in _dispatch_update
    await callback(event)
  File "/home/nitan_marcel/TelegramCompanion/tg_companion/modules/misc.py", line 204, in py_execute
    await event.edit(f"**Query**:\n`{code}`\n\n **Exception:**\n`{exc}`")
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/telethon/tl/custom/message.py", line 656, in edit
    *args, **kwargs
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/telethon/client/messages.py", line 695, in edit_message
    msg = self._get_response_message(request, await self(request), entity)
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/telethon/client/users.py", line 59, in __call__
    result = await future
telethon.errors.rpcerrorlist.MessageIdInvalidError: The specified message ID is invalid (caused by EditMessageRequest)
2019-02-17 01:59:32,356 - telethon.client.updates - ERROR - Unhandled exception on py_execute
Traceback (most recent call last):
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/telethon/client/updates.py", line 277, in _dispatch_update
    await callback(event)
  File "/home/nitan_marcel/TelegramCompanion/tg_companion/modules/misc.py", line 204, in py_execute
    await event.edit(f"**Query**:\n`{code}`\n\n **Exception:**\n`{exc}`")
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/telethon/tl/custom/message.py", line 656, in edit
    *args, **kwargs
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/telethon/client/messages.py", line 695, in edit_message
    msg = self._get_response_message(request, await self(request), entity)
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/telethon/client/users.py", line 59, in __call__
    result = await future
telethon.errors.rpcerrorlist.MessageIdInvalidError: The specified message ID is invalid (caused by EditMessageRequest)
                                                                               N/A% (0 of 49) |                         | Elapsed Time: 0:00:00 ETA:  --:--:--                                                                               100% (49 of 49) |########################| Elapsed Time: 0:00:06 Time:  0:00:06
2019-02-17 02:00:10,225 - telethon.client.users - INFO - Sleeping for 10s on flood wait
2019-02-17 02:00:40,355 - telethon.client.users - INFO - Sleeping for 10s on flood wait
2019-02-17 02:01:10,260 - tg_companion - INFO - DONE!! You can see your stats by sending .stats in any chat
2019-02-17 03:01:10,446 - tg_companion - INFO - Updating Stats...
2019-02-17 03:01:10,446 - tg_companion - INFO - The companion may not respond to your command for 5 second. Don't panic and try again if your command didn't worked
                                                                               N/A% (0 of 49) |                         | Elapsed Time: 0:00:00 ETA:  --:--:--                                                                               100% (49 of 49) |########################| Elapsed Time: 0:00:06 Time:  0:00:06
2019-02-17 03:01:48,700 - telethon.client.users - INFO - Sleeping for 11s on flood wait
2019-02-17 03:02:19,772 - telethon.client.users - INFO - Sleeping for 10s on flood wait
2019-02-17 03:02:49,447 - tg_companion - INFO - DONE!! You can see your stats by sending .stats in any chat
2019-02-17 04:02:49,648 - tg_companion - INFO - Updating Stats...
2019-02-17 04:02:49,649 - tg_companion - INFO - The companion may not respond to your command for 5 second. Don't panic and try again if your command didn't worked
                                                                               N/A% (0 of 49) |                         | Elapsed Time: 0:00:00 ETA:  --:--:--                                                                               100% (49 of 49) |########################| Elapsed Time: 0:00:06 Time:  0:00:06
2019-02-17 04:03:27,653 - telethon.client.users - INFO - Sleeping for 11s on flood wait
2019-02-17 04:03:59,513 - telethon.client.users - INFO - Sleeping for 9s on flood wait
2019-02-17 04:04:28,801 - tg_companion - INFO - DONE!! You can see your stats by sending .stats in any chat
2019-02-17 05:04:28,981 - tg_companion - INFO - Updating Stats...
2019-02-17 05:04:28,981 - tg_companion - INFO - The companion may not respond to your command for 5 second. Don't panic and try again if your command didn't worked
                                                                               N/A% (0 of 49) |                         | Elapsed Time: 0:00:00 ETA:  --:--:--                                                                               100% (49 of 49) |########################| Elapsed Time: 0:00:06 Time:  0:00:06
2019-02-17 05:05:06,716 - telethon.client.users - INFO - Sleeping for 11s on flood wait
2019-02-17 05:05:37,831 - telethon.client.users - INFO - Sleeping for 10s on flood wait
2019-02-17 05:06:08,464 - tg_companion - INFO - DONE!! You can see your stats by sending .stats in any chat
2019-02-17 06:06:08,645 - tg_companion - INFO - Updating Stats...
2019-02-17 06:06:08,646 - tg_companion - INFO - The companion may not respond to your command for 5 second. Don't panic and try again if your command didn't worked
                                                                               N/A% (0 of 49) |                         | Elapsed Time: 0:00:00 ETA:  --:--:--                                                                               100% (49 of 49) |########################| Elapsed Time: 0:00:06 Time:  0:00:06
2019-02-17 06:06:45,936 - telethon.client.users - INFO - Sleeping for 11s on flood wait
2019-02-17 06:07:17,197 - telethon.client.users - INFO - Sleeping for 10s on flood wait
2019-02-17 06:07:47,336 - tg_companion - INFO - DONE!! You can see your stats by sending .stats in any chat
2019-02-17 07:07:47,519 - tg_companion - INFO - Updating Stats...
2019-02-17 07:07:47,519 - tg_companion - INFO - The companion may not respond to your command for 5 second. Don't panic and try again if your command didn't worked
                                                                               N/A% (0 of 49) |                         | Elapsed Time: 0:00:00 ETA:  --:--:--                                                                               100% (49 of 49) |########################| Elapsed Time: 0:00:06 Time:  0:00:06
2019-02-17 07:08:26,218 - telethon.client.users - INFO - Sleeping for 10s on flood wait
2019-02-17 07:08:56,090 - telethon.client.users - INFO - Sleeping for 11s on flood wait
2019-02-17 07:09:27,235 - tg_companion - INFO - DONE!! You can see your stats by sending .stats in any chat
2019-02-17 08:09:27,421 - tg_companion - INFO - Updating Stats...
2019-02-17 08:09:27,421 - tg_companion - INFO - The companion may not respond to your command for 5 second. Don't panic and try again if your command didn't worked
                                                                               N/A% (0 of 49) |                         | Elapsed Time: 0:00:00 ETA:  --:--:--                                                                               100% (49 of 49) |########################| Elapsed Time: 0:00:06 Time:  0:00:06
2019-02-17 08:10:07,784 - telethon.client.users - INFO - Sleeping for 10s on flood wait
2019-02-17 08:10:39,211 - telethon.client.users - INFO - Sleeping for 8s on flood wait
2019-02-17 08:11:08,083 - tg_companion - INFO - DONE!! You can see your stats by sending .stats in any chat
2019-02-17 09:11:08,261 - tg_companion - INFO - Updating Stats...
2019-02-17 09:11:08,261 - tg_companion - INFO - The companion may not respond to your command for 5 second. Don't panic and try again if your command didn't worked
                                                                               N/A% (0 of 49) |                         | Elapsed Time: 0:00:00 ETA:  --:--:--                                                                               100% (49 of 49) |########################| Elapsed Time: 0:00:06 Time:  0:00:06
2019-02-17 09:11:47,588 - telethon.client.users - INFO - Sleeping for 10s on flood wait
2019-02-17 09:12:18,347 - telethon.client.users - INFO - Sleeping for 9s on flood wait
2019-02-17 09:12:46,916 - tg_companion - INFO - DONE!! You can see your stats by sending .stats in any chat
2019-02-17 10:12:47,120 - tg_companion - INFO - Updating Stats...
2019-02-17 10:12:47,121 - tg_companion - INFO - The companion may not respond to your command for 5 second. Don't panic and try again if your command didn't worked
                                                                               N/A% (0 of 49) |                         | Elapsed Time: 0:00:00 ETA:  --:--:--                                                                               100% (49 of 49) |########################| Elapsed Time: 0:00:06 Time:  0:00:06
2019-02-17 10:13:26,508 - telethon.client.users - INFO - Sleeping for 10s on flood wait
2019-02-17 10:13:57,385 - telethon.client.users - INFO - Sleeping for 9s on flood wait
2019-02-17 10:14:26,952 - tg_companion - INFO - DONE!! You can see your stats by sending .stats in any chat
2019-02-17 11:14:27,135 - tg_companion - INFO - Updating Stats...
2019-02-17 11:14:27,135 - tg_companion - INFO - The companion may not respond to your command for 5 second. Don't panic and try again if your command didn't worked
                                                                               N/A% (0 of 49) |                         | Elapsed Time: 0:00:00 ETA:  --:--:--                                                                               100% (49 of 49) |########################| Elapsed Time: 0:00:06 Time:  0:00:06
2019-02-17 11:15:06,682 - telethon.client.users - INFO - Sleeping for 10s on flood wait
2019-02-17 11:15:37,684 - telethon.client.users - INFO - Sleeping for 9s on flood wait
2019-02-17 11:16:07,646 - tg_companion - INFO - DONE!! You can see your stats by sending .stats in any chat
2019-02-17 12:16:07,850 - tg_companion - INFO - Updating Stats...
2019-02-17 12:16:07,850 - tg_companion - INFO - The companion may not respond to your command for 5 second. Don't panic and try again if your command didn't worked
                                                                               N/A% (0 of 49) |                         | Elapsed Time: 0:00:00 ETA:  --:--:--                                                                               100% (49 of 49) |########################| Elapsed Time: 0:00:06 Time:  0:00:06
2019-02-17 12:16:48,079 - telethon.client.users - INFO - Sleeping for 10s on flood wait
2019-02-17 12:17:18,959 - telethon.client.users - INFO - Sleeping for 10s on flood wait
2019-02-17 12:17:49,685 - tg_companion - INFO - DONE!! You can see your stats by sending .stats in any chat
2019-02-17 13:17:49,874 - tg_companion - INFO - Updating Stats...
2019-02-17 13:17:49,874 - tg_companion - INFO - The companion may not respond to your command for 5 second. Don't panic and try again if your command didn't worked
                                                                               N/A% (0 of 49) |                         | Elapsed Time: 0:00:00 ETA:  --:--:--                                                                               100% (49 of 49) |########################| Elapsed Time: 0:00:06 Time:  0:00:06
2019-02-17 13:18:29,447 - telethon.client.users - INFO - Sleeping for 10s on flood wait
2019-02-17 13:19:00,188 - telethon.client.users - INFO - Sleeping for 9s on flood wait
2019-02-17 13:19:29,356 - tg_companion - INFO - DONE!! You can see your stats by sending .stats in any chat
2019-02-17 14:19:29,539 - tg_companion - INFO - Updating Stats...
2019-02-17 14:19:29,539 - tg_companion - INFO - The companion may not respond to your command for 5 second. Don't panic and try again if your command didn't worked
                                                                               N/A% (0 of 49) |                         | Elapsed Time: 0:00:00 ETA:  --:--:--                                                                               100% (49 of 49) |########################| Elapsed Time: 0:00:06 Time:  0:00:06
2019-02-17 14:20:08,122 - telethon.client.users - INFO - Sleeping for 10s on flood wait
2019-02-17 14:20:38,800 - telethon.client.users - INFO - Sleeping for 10s on flood wait
2019-02-17 14:21:09,720 - tg_companion - INFO - DONE!! You can see your stats by sending .stats in any chat
2019-02-17 15:21:09,906 - tg_companion - INFO - Updating Stats...
2019-02-17 15:21:09,906 - tg_companion - INFO - The companion may not respond to your command for 5 second. Don't panic and try again if your command didn't worked
                                                                               N/A% (0 of 49) |                         | Elapsed Time: 0:00:00 ETA:  --:--:--                                                                               100% (49 of 49) |########################| Elapsed Time: 0:00:06 Time:  0:00:06
2019-02-17 15:21:49,002 - telethon.client.users - INFO - Sleeping for 11s on flood wait
2019-02-17 15:22:21,049 - telethon.client.users - INFO - Sleeping for 10s on flood wait
2019-02-17 15:22:51,509 - tg_companion - INFO - DONE!! You can see your stats by sending .stats in any chat
2019-02-17 16:22:51,700 - tg_companion - INFO - Updating Stats...
2019-02-17 16:22:51,700 - tg_companion - INFO - The companion may not respond to your command for 5 second. Don't panic and try again if your command didn't worked
                                                                               N/A% (0 of 49) |                         | Elapsed Time: 0:00:00 ETA:  --:--:--                                                                               100% (49 of 49) |########################| Elapsed Time: 0:00:06 Time:  0:00:06
2019-02-17 16:23:32,069 - telethon.client.users - INFO - Sleeping for 10s on flood wait
2019-02-17 16:24:03,663 - telethon.client.users - INFO - Sleeping for 9s on flood wait
2019-02-17 16:24:33,510 - tg_companion - INFO - DONE!! You can see your stats by sending .stats in any chat
2019-02-17 17:11:01,509 - telethon.client.uploads - INFO - Uploading file of 142627 bytes in 2 chunks of 131072
2019-02-17 17:24:33,691 - tg_companion - INFO - Updating Stats...
2019-02-17 17:24:33,691 - tg_companion - INFO - The companion may not respond to your command for 5 second. Don't panic and try again if your command didn't worked
                                                                               N/A% (0 of 49) |                         | Elapsed Time: 0:00:00 ETA:  --:--:--                                                                               100% (49 of 49) |########################| Elapsed Time: 0:00:06 Time:  0:00:06
2019-02-17 17:25:13,081 - telethon.client.users - INFO - Sleeping for 10s on flood wait
2019-02-17 17:25:43,846 - telethon.client.users - INFO - Sleeping for 10s on flood wait
2019-02-17 17:26:14,521 - tg_companion - INFO - DONE!! You can see your stats by sending .stats in any chat
2019-02-17 18:26:14,714 - tg_companion - INFO - Updating Stats...
2019-02-17 18:26:14,715 - tg_companion - INFO - The companion may not respond to your command for 5 second. Don't panic and try again if your command didn't worked
                                                                               N/A% (0 of 49) |                         | Elapsed Time: 0:00:00 ETA:  --:--:--                                                                               100% (49 of 49) |########################| Elapsed Time: 0:00:06 Time:  0:00:06
2019-02-17 18:26:54,858 - telethon.client.users - INFO - Sleeping for 10s on flood wait
2019-02-17 18:27:25,922 - telethon.client.users - INFO - Sleeping for 9s on flood wait
2019-02-17 18:27:55,458 - tg_companion - INFO - DONE!! You can see your stats by sending .stats in any chat
2019-02-17 19:27:55,648 - tg_companion - INFO - Updating Stats...
2019-02-17 19:27:55,648 - tg_companion - INFO - The companion may not respond to your command for 5 second. Don't panic and try again if your command didn't worked
                                                                               N/A% (0 of 49) |                         | Elapsed Time: 0:00:00 ETA:  --:--:--                                                                               100% (49 of 49) |########################| Elapsed Time: 0:00:06 Time:  0:00:06
2019-02-17 19:28:33,380 - telethon.client.users - INFO - Sleeping for 11s on flood wait
2019-02-17 19:29:04,800 - telethon.client.users - INFO - Sleeping for 10s on flood wait
2019-02-17 19:29:34,606 - tg_companion - INFO - DONE!! You can see your stats by sending .stats in any chat
2019-02-17 20:27:19,967 - telethon.client.updates - ERROR - Unhandled exception on wrapper
Traceback (most recent call last):
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1236, in _execute_context
    cursor, statement, parameters, context
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/engine/default.py", line 536, in do_execute
    cursor.execute(statement, parameters)
psycopg2.IntegrityError: duplicate key value violates unique constraint "gban_allowed_chats_pkey"
DETAIL:  Key (chat_id)=(1493518227) already exists.


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/telethon/client/updates.py", line 277, in _dispatch_update
    await callback(event)
  File "/home/nitan_marcel/TelegramCompanion/tg_companion/tgclient.py", line 213, in wrapper
    return await func(*args, **kwds)
  File "/home/nitan_marcel/TelegramCompanion/tg_companion/modules/gbans.py", line 259, in enable_gbans
    connection.execute(query)
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 980, in execute
    return meth(self, multiparams, params)
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/sql/elements.py", line 273, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1099, in _execute_clauseelement
    distilled_params,
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1240, in _execute_context
    e, statement, parameters, cursor, context
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1458, in _handle_dbapi_exception
    util.raise_from_cause(sqlalchemy_exception, exc_info)
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/util/compat.py", line 296, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb, cause=cause)
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/util/compat.py", line 276, in reraise
    raise value.with_traceback(tb)
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1236, in _execute_context
    cursor, statement, parameters, context
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/engine/default.py", line 536, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (psycopg2.IntegrityError) duplicate key value violates unique constraint "gban_allowed_chats_pkey"
DETAIL:  Key (chat_id)=(1493518227) already exists.
 [SQL: 'INSERT INTO gban_allowed_chats (chat_id, is_enabled) VALUES (%(chat_id)s, %(is_enabled)s)'] [parameters: {'chat_id': 1493518227, 'is_enabled': True}] (Background on this error at: http://sqlalche.me/e/gkpj)
2019-02-17 20:28:27,884 - telethon.client.updates - ERROR - Unhandled exception on wrapper
Traceback (most recent call last):
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1236, in _execute_context
    cursor, statement, parameters, context
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/engine/default.py", line 536, in do_execute
    cursor.execute(statement, parameters)
psycopg2.IntegrityError: duplicate key value violates unique constraint "gban_allowed_chats_pkey"
DETAIL:  Key (chat_id)=(1493518227) already exists.


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/telethon/client/updates.py", line 277, in _dispatch_update
    await callback(event)
  File "/home/nitan_marcel/TelegramCompanion/tg_companion/tgclient.py", line 213, in wrapper
    return await func(*args, **kwds)
  File "/home/nitan_marcel/TelegramCompanion/tg_companion/modules/gbans.py", line 259, in enable_gbans
    connection.execute(query)
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 980, in execute
    return meth(self, multiparams, params)
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/sql/elements.py", line 273, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1099, in _execute_clauseelement
    distilled_params,
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1240, in _execute_context
    e, statement, parameters, cursor, context
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1458, in _handle_dbapi_exception
    util.raise_from_cause(sqlalchemy_exception, exc_info)
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/util/compat.py", line 296, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb, cause=cause)
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/util/compat.py", line 276, in reraise
    raise value.with_traceback(tb)
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1236, in _execute_context
    cursor, statement, parameters, context
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/engine/default.py", line 536, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (psycopg2.IntegrityError) duplicate key value violates unique constraint "gban_allowed_chats_pkey"
DETAIL:  Key (chat_id)=(1493518227) already exists.
 [SQL: 'INSERT INTO gban_allowed_chats (chat_id, is_enabled) VALUES (%(chat_id)s, %(is_enabled)s)'] [parameters: {'chat_id': 1493518227, 'is_enabled': True}] (Background on this error at: http://sqlalche.me/e/gkpj)
2019-02-17 20:29:34,789 - tg_companion - INFO - Updating Stats...
2019-02-17 20:29:34,792 - tg_companion - INFO - The companion may not respond to your command for 5 second. Don't panic and try again if your command didn't worked
2019-02-18 00:14:06,236 - tg_companion - INFO - MODULES to load: ['afk', 'chats', 'github', 'global_bans', 'migrate', 'misc', 'private_msg', 'profanity_filter', 'profile', 'stats', 'terminals'] 
2019-02-18 00:14:06,285 - tg_companion - INFO - Loading Plugin: getinstalledplugins
2019-02-18 00:14:07,673 - telethon.crypto.aes - INFO - cryptg detected, it will be used for encryption
2019-02-18 00:14:11,107 - tg_companion - INFO - Starting TelegramCompanion
2019-02-18 00:14:11,149 - telethon.network.mtprotosender - INFO - Connecting to 149.154.167.92:443/TcpFull...
2019-02-18 00:14:11,303 - telethon.network.mtprotosender - INFO - Connection to 149.154.167.92:443/TcpFull complete!
2019-02-18 00:14:11,993 - tg_companion - INFO - Connected!!
2019-02-18 00:14:24,882 - tg_companion - INFO - Your userbot is running. Type .ping in any chat to test it
2019-02-18 00:14:25,913 - tg_companion - INFO - Updating Stats...
2019-02-18 00:14:25,913 - tg_companion - INFO - The companion may not respond to your command for 5 second. Don't panic and try again if your command didn't worked
                                                                               N/A% (0 of 48) |                         | Elapsed Time: 0:00:00 ETA:  --:--:--                                                                               100% (48 of 48) |########################| Elapsed Time: 0:00:06 Time:  0:00:06
2019-02-18 00:15:02,555 - telethon.client.users - INFO - Sleeping for 11s on flood wait
2019-02-18 00:15:33,483 - telethon.client.users - INFO - Sleeping for 10s on flood wait
2019-02-18 00:16:03,212 - tg_companion - INFO - DONE!! You can see your stats by sending .stats in any chat
2019-02-18 01:16:03,383 - tg_companion - INFO - Updating Stats...
2019-02-18 01:16:03,383 - tg_companion - INFO - The companion may not respond to your command for 5 second. Don't panic and try again if your command didn't worked
                                                                               N/A% (0 of 49) |                         | Elapsed Time: 0:00:00 ETA:  --:--:--                                                                               100% (49 of 49) |########################| Elapsed Time: 0:00:05 Time:  0:00:05
2019-02-18 01:16:39,680 - telethon.client.users - INFO - Sleeping for 12s on flood wait
2019-02-18 01:17:12,056 - telethon.client.users - INFO - Sleeping for 10s on flood wait
2019-02-18 01:17:42,182 - tg_companion - INFO - DONE!! You can see your stats by sending .stats in any chat
2019-02-18 02:17:42,361 - tg_companion - INFO - Updating Stats...
2019-02-18 02:17:42,361 - tg_companion - INFO - The companion may not respond to your command for 5 second. Don't panic and try again if your command didn't worked
                                                                               N/A% (0 of 49) |                         | Elapsed Time: 0:00:00 ETA:  --:--:--                                                                               100% (49 of 49) |########################| Elapsed Time: 0:00:06 Time:  0:00:06
2019-02-18 02:18:19,772 - telethon.client.users - INFO - Sleeping for 11s on flood wait
2019-02-18 02:18:50,420 - telethon.client.users - INFO - Sleeping for 10s on flood wait
2019-02-18 02:19:19,577 - tg_companion - INFO - DONE!! You can see your stats by sending .stats in any chat
2019-02-18 03:19:19,808 - tg_companion - INFO - Updating Stats...
2019-02-18 03:19:19,808 - tg_companion - INFO - The companion may not respond to your command for 5 second. Don't panic and try again if your command didn't worked
                                                                               N/A% (0 of 49) |                         | Elapsed Time: 0:00:00 ETA:  --:--:--                                                                               100% (49 of 49) |########################| Elapsed Time: 0:00:06 Time:  0:00:06
2019-02-18 03:19:56,813 - telethon.client.users - INFO - Sleeping for 12s on flood wait
2019-02-18 03:20:28,701 - telethon.client.users - INFO - Sleeping for 10s on flood wait
2019-02-18 03:20:58,026 - tg_companion - INFO - DONE!! You can see your stats by sending .stats in any chat
2019-02-18 04:20:58,209 - tg_companion - INFO - Updating Stats...
2019-02-18 04:20:58,210 - tg_companion - INFO - The companion may not respond to your command for 5 second. Don't panic and try again if your command didn't worked
                                                                               N/A% (0 of 49) |                         | Elapsed Time: 0:00:00 ETA:  --:--:--                                                                               100% (49 of 49) |########################| Elapsed Time: 0:00:06 Time:  0:00:06
2019-02-18 04:21:35,389 - telethon.client.users - INFO - Sleeping for 11s on flood wait
2019-02-18 04:22:07,011 - telethon.client.users - INFO - Sleeping for 10s on flood wait
2019-02-18 04:22:36,646 - tg_companion - INFO - DONE!! You can see your stats by sending .stats in any chat
2019-02-18 05:22:36,837 - tg_companion - INFO - Updating Stats...
2019-02-18 05:22:36,837 - tg_companion - INFO - The companion may not respond to your command for 5 second. Don't panic and try again if your command didn't worked
                                                                               N/A% (0 of 49) |                         | Elapsed Time: 0:00:00 ETA:  --:--:--                                                                               100% (49 of 49) |########################| Elapsed Time: 0:00:06 Time:  0:00:06
2019-02-18 05:23:13,868 - telethon.client.users - INFO - Sleeping for 12s on flood wait
2019-02-18 05:23:45,874 - telethon.client.users - INFO - Sleeping for 10s on flood wait
2019-02-18 05:24:17,078 - tg_companion - INFO - DONE!! You can see your stats by sending .stats in any chat
2019-02-18 06:24:17,272 - tg_companion - INFO - Updating Stats...
2019-02-18 06:24:17,273 - tg_companion - INFO - The companion may not respond to your command for 5 second. Don't panic and try again if your command didn't worked
                                                                               N/A% (0 of 49) |                         | Elapsed Time: 0:00:00 ETA:  --:--:--                                                                               100% (49 of 49) |########################| Elapsed Time: 0:00:06 Time:  0:00:06
2019-02-18 06:24:54,069 - telethon.client.users - INFO - Sleeping for 12s on flood wait
2019-02-18 06:25:26,403 - telethon.client.users - INFO - Sleeping for 10s on flood wait
2019-02-18 06:25:56,136 - tg_companion - INFO - DONE!! You can see your stats by sending .stats in any chat
2019-02-18 07:25:56,324 - tg_companion - INFO - Updating Stats...
2019-02-18 07:25:56,324 - tg_companion - INFO - The companion may not respond to your command for 5 second. Don't panic and try again if your command didn't worked
                                                                               N/A% (0 of 49) |                         | Elapsed Time: 0:00:00 ETA:  --:--:--                                                                               100% (49 of 49) |########################| Elapsed Time: 0:00:06 Time:  0:00:06
2019-02-18 07:26:33,535 - telethon.client.users - INFO - Sleeping for 11s on flood wait
2019-02-18 07:27:04,204 - telethon.client.users - INFO - Sleeping for 10s on flood wait
2019-02-18 07:27:33,882 - tg_companion - INFO - DONE!! You can see your stats by sending .stats in any chat
2019-02-18 08:27:34,089 - tg_companion - INFO - Updating Stats...
2019-02-18 08:27:34,090 - tg_companion - INFO - The companion may not respond to your command for 5 second. Don't panic and try again if your command didn't worked
                                                                               N/A% (0 of 49) |                         | Elapsed Time: 0:00:00 ETA:  --:--:--                                                                               100% (49 of 49) |########################| Elapsed Time: 0:00:06 Time:  0:00:06
2019-02-18 08:28:13,048 - telethon.client.users - INFO - Sleeping for 12s on flood wait
2019-02-18 08:28:45,367 - telethon.client.users - INFO - Sleeping for 10s on flood wait
2019-02-18 08:29:14,773 - tg_companion - INFO - DONE!! You can see your stats by sending .stats in any chat
2019-02-18 09:29:15,466 - tg_companion - INFO - Updating Stats...
2019-02-18 09:29:15,466 - tg_companion - INFO - The companion may not respond to your command for 5 second. Don't panic and try again if your command didn't worked
                                                                               N/A% (0 of 49) |                         | Elapsed Time: 0:00:00 ETA:  --:--:--                                                                               100% (49 of 49) |########################| Elapsed Time: 0:00:06 Time:  0:00:06
2019-02-18 09:29:55,599 - telethon.client.users - INFO - Sleeping for 11s on flood wait
2019-02-18 09:30:27,475 - telethon.client.users - INFO - Sleeping for 9s on flood wait
2019-02-18 09:30:56,895 - tg_companion - INFO - DONE!! You can see your stats by sending .stats in any chat
2019-02-18 10:30:57,089 - tg_companion - INFO - Updating Stats...
2019-02-18 10:30:57,089 - tg_companion - INFO - The companion may not respond to your command for 5 second. Don't panic and try again if your command didn't worked
                                                                               N/A% (0 of 49) |                         | Elapsed Time: 0:00:00 ETA:  --:--:--                                                                               100% (49 of 49) |########################| Elapsed Time: 0:00:06 Time:  0:00:06
2019-02-18 10:31:36,210 - telethon.client.users - INFO - Sleeping for 10s on flood wait
2019-02-18 10:32:07,549 - telethon.client.users - INFO - Sleeping for 9s on flood wait
2019-02-18 10:32:37,518 - tg_companion - INFO - DONE!! You can see your stats by sending .stats in any chat
2019-02-18 11:32:37,696 - tg_companion - INFO - Updating Stats...
2019-02-18 11:32:37,696 - tg_companion - INFO - The companion may not respond to your command for 5 second. Don't panic and try again if your command didn't worked
                                                                               N/A% (0 of 49) |                         | Elapsed Time: 0:00:00 ETA:  --:--:--                                                                               100% (49 of 49) |########################| Elapsed Time: 0:00:06 Time:  0:00:06
2019-02-18 11:33:16,489 - telethon.client.users - INFO - Sleeping for 10s on flood wait
2019-02-18 11:33:47,279 - telethon.client.users - INFO - Sleeping for 9s on flood wait
2019-02-18 11:34:16,390 - tg_companion - INFO - DONE!! You can see your stats by sending .stats in any chat
2019-02-18 12:34:16,569 - tg_companion - INFO - Updating Stats...
2019-02-18 12:34:16,569 - tg_companion - INFO - The companion may not respond to your command for 5 second. Don't panic and try again if your command didn't worked
                                                                               N/A% (0 of 49) |                         | Elapsed Time: 0:00:00 ETA:  --:--:--                                                                               100% (49 of 49) |########################| Elapsed Time: 0:00:06 Time:  0:00:06
2019-02-18 12:34:54,010 - telethon.client.users - INFO - Sleeping for 11s on flood wait
2019-02-18 12:35:25,827 - telethon.client.users - INFO - Sleeping for 10s on flood wait
2019-02-18 12:35:55,872 - tg_companion - INFO - DONE!! You can see your stats by sending .stats in any chat
2019-02-18 13:35:56,052 - tg_companion - INFO - Updating Stats...
2019-02-18 13:35:56,052 - tg_companion - INFO - The companion may not respond to your command for 5 second. Don't panic and try again if your command didn't worked
                                                                               N/A% (0 of 49) |                         | Elapsed Time: 0:00:00 ETA:  --:--:--                                                                               100% (49 of 49) |########################| Elapsed Time: 0:00:06 Time:  0:00:06
2019-02-18 13:36:33,058 - telethon.client.users - INFO - Sleeping for 12s on flood wait
2019-02-18 13:37:04,866 - telethon.client.users - INFO - Sleeping for 11s on flood wait
2019-02-18 13:37:35,059 - tg_companion - INFO - DONE!! You can see your stats by sending .stats in any chat
2019-02-18 14:37:35,230 - tg_companion - INFO - Updating Stats...
2019-02-18 14:37:35,230 - tg_companion - INFO - The companion may not respond to your command for 5 second. Don't panic and try again if your command didn't worked
                                                                               N/A% (0 of 49) |                         | Elapsed Time: 0:00:00 ETA:  --:--:--                                                                               100% (49 of 49) |########################| Elapsed Time: 0:00:06 Time:  0:00:06
2019-02-18 14:38:12,131 - telethon.client.users - INFO - Sleeping for 11s on flood wait
2019-02-18 14:38:43,260 - telethon.client.users - INFO - Sleeping for 10s on flood wait
2019-02-18 14:39:12,537 - tg_companion - INFO - DONE!! You can see your stats by sending .stats in any chat
2019-02-18 15:39:12,718 - tg_companion - INFO - Updating Stats...
2019-02-18 15:39:12,719 - tg_companion - INFO - The companion may not respond to your command for 5 second. Don't panic and try again if your command didn't worked
                                                                               N/A% (0 of 49) |                         | Elapsed Time: 0:00:00 ETA:  --:--:--                                                                               100% (49 of 49) |########################| Elapsed Time: 0:00:06 Time:  0:00:06
2019-02-18 15:39:49,879 - telethon.client.users - INFO - Sleeping for 12s on flood wait
2019-02-18 15:40:22,358 - telethon.client.users - INFO - Sleeping for 9s on flood wait
2019-02-18 15:40:51,209 - tg_companion - INFO - DONE!! You can see your stats by sending .stats in any chat
2019-02-18 16:40:51,390 - tg_companion - INFO - Updating Stats...
2019-02-18 16:40:51,391 - tg_companion - INFO - The companion may not respond to your command for 5 second. Don't panic and try again if your command didn't worked
                                                                               N/A% (0 of 49) |                         | Elapsed Time: 0:00:00 ETA:  --:--:--                                                                               100% (49 of 49) |########################| Elapsed Time: 0:00:06 Time:  0:00:06
2019-02-18 16:41:30,385 - telethon.client.users - INFO - Sleeping for 11s on flood wait
2019-02-18 16:42:02,287 - telethon.client.users - INFO - Sleeping for 9s on flood wait
2019-02-18 16:42:31,777 - tg_companion - INFO - DONE!! You can see your stats by sending .stats in any chat
2019-02-18 17:42:31,965 - tg_companion - INFO - Updating Stats...
2019-02-18 17:42:31,966 - tg_companion - INFO - The companion may not respond to your command for 5 second. Don't panic and try again if your command didn't worked
                                                                               N/A% (0 of 49) |                         | Elapsed Time: 0:00:00 ETA:  --:--:--                                                                               100% (49 of 49) |########################| Elapsed Time: 0:00:06 Time:  0:00:06
2019-02-18 17:43:08,773 - telethon.client.users - INFO - Sleeping for 11s on flood wait
2019-02-18 17:43:40,162 - telethon.client.users - INFO - Sleeping for 9s on flood wait
2019-02-18 17:44:09,128 - tg_companion - INFO - DONE!! You can see your stats by sending .stats in any chat
2019-02-18 18:44:09,327 - tg_companion - INFO - Updating Stats...
2019-02-18 18:44:09,327 - tg_companion - INFO - The companion may not respond to your command for 5 second. Don't panic and try again if your command didn't worked
                                                                               N/A% (0 of 49) |                         | Elapsed Time: 0:00:00 ETA:  --:--:--                                                                               100% (49 of 49) |########################| Elapsed Time: 0:00:06 Time:  0:00:06
2019-02-18 18:44:46,774 - telethon.client.users - INFO - Sleeping for 11s on flood wait
2019-02-18 18:45:18,571 - telethon.client.users - INFO - Sleeping for 9s on flood wait
2019-02-18 18:45:47,827 - tg_companion - INFO - DONE!! You can see your stats by sending .stats in any chat
2019-02-18 19:45:48,016 - tg_companion - INFO - Updating Stats...
2019-02-18 19:45:48,016 - tg_companion - INFO - The companion may not respond to your command for 5 second. Don't panic and try again if your command didn't worked
                                                                               N/A% (0 of 49) |                         | Elapsed Time: 0:00:00 ETA:  --:--:--                                                                               100% (49 of 49) |########################| Elapsed Time: 0:00:06 Time:  0:00:06
2019-02-18 19:46:25,024 - telethon.client.users - INFO - Sleeping for 12s on flood wait
2019-02-18 19:46:57,623 - telethon.client.users - INFO - Sleeping for 10s on flood wait
2019-02-18 19:47:27,050 - tg_companion - INFO - DONE!! You can see your stats by sending .stats in any chat
2019-02-18 20:47:27,233 - tg_companion - INFO - Updating Stats...
2019-02-18 20:47:27,233 - tg_companion - INFO - The companion may not respond to your command for 5 second. Don't panic and try again if your command didn't worked
                                                                               N/A% (0 of 49) |                         | Elapsed Time: 0:00:00 ETA:  --:--:--                                                                               100% (49 of 49) |########################| Elapsed Time: 0:00:06 Time:  0:00:06
2019-02-18 20:48:04,892 - telethon.client.users - INFO - Sleeping for 11s on flood wait
2019-02-18 20:48:36,631 - telethon.client.users - INFO - Sleeping for 9s on flood wait
2019-02-18 20:49:05,255 - tg_companion - INFO - DONE!! You can see your stats by sending .stats in any chat
2019-02-18 21:49:05,426 - tg_companion - INFO - Updating Stats...
2019-02-18 21:49:05,427 - tg_companion - INFO - The companion may not respond to your command for 5 second. Don't panic and try again if your command didn't worked
                                                                               N/A% (0 of 49) |                         | Elapsed Time: 0:00:00 ETA:  --:--:--                                                                               100% (49 of 49) |########################| Elapsed Time: 0:00:06 Time:  0:00:06
2019-02-18 21:49:42,305 - telethon.client.users - INFO - Sleeping for 11s on flood wait
2019-02-18 21:50:13,726 - telethon.client.users - INFO - Sleeping for 10s on flood wait
2019-02-18 21:50:44,146 - tg_companion - INFO - DONE!! You can see your stats by sending .stats in any chat
2019-02-18 22:50:44,324 - tg_companion - INFO - Updating Stats...
2019-02-18 22:50:44,324 - tg_companion - INFO - The companion may not respond to your command for 5 second. Don't panic and try again if your command didn't worked
                                                                               N/A% (0 of 49) |                         | Elapsed Time: 0:00:00 ETA:  --:--:--                                                                               100% (49 of 49) |########################| Elapsed Time: 0:00:06 Time:  0:00:06
2019-02-18 22:51:20,866 - telethon.crypto.aes - INFO - cryptg detected, it will be used for encryption
2019-02-18 22:51:21,063 - tg_companion - INFO - MODULES to load: ['afk', 'chats', 'github', 'global_bans', 'global_notes', 'migrate', 'misc', 'private_msg', 'profanity_filter', 'profile', 'stats', 'terminals'] 
2019-02-18 22:51:21,063 - tg_companion - INFO - Loading Plugin: getinstalledplugins
2019-02-18 22:51:22,118 - tg_companion - INFO - Starting TelegramCompanion
2019-02-18 22:51:22,162 - telethon.network.mtprotosender - INFO - Connecting to 149.154.167.92:443/TcpFull...
2019-02-18 22:51:22,309 - telethon.network.mtprotosender - INFO - Connection to 149.154.167.92:443/TcpFull complete!
2019-02-18 22:51:22,491 - telethon.client.users - INFO - Sleeping for 10s on flood wait
2019-02-18 22:51:22,912 - tg_companion - INFO - Connected!!
2019-02-18 22:51:28,491 - tg_companion - INFO - Your userbot is running. Type .version in any chat to test it
2019-02-18 22:51:29,518 - tg_companion - INFO - Updating Stats...
2019-02-18 22:51:29,518 - tg_companion - INFO - The companion may not respond to your command for 5 second. Don't panic and try again if your command didn't worked
                                                                               N/A% (0 of 49) |                         | Elapsed Time: 0:00:00 ETA:  --:--:--                                                                               100% (49 of 49) |########################| Elapsed Time: 0:00:06 Time:  0:00:06
2019-02-18 22:51:52,084 - telethon.client.users - INFO - Sleeping for 11s on flood wait
2019-02-18 22:51:52,246 - telethon.client.users - INFO - Sleeping for 10s on flood wait
2019-02-18 22:52:13,182 - telethon.client.users - INFO - Sleeping for 19s on flood wait
2019-02-18 22:52:13,189 - telethon.client.users - INFO - Sleeping for 19s on flood wait
2019-02-18 22:52:42,685 - telethon.client.users - INFO - Sleeping for 20s on flood wait
2019-02-18 22:52:42,732 - telethon.client.users - INFO - Sleeping for 20s on flood wait
2019-02-18 22:53:07,475 - tg_companion - INFO - DONE!! You can see your stats by sending .stats in any chat
2019-02-18 22:53:18,380 - telethon.client.users - INFO - Sleeping for 14s on flood wait
2019-02-18 22:53:51,798 - tg_companion - INFO - DONE!! You can see your stats by sending .stats in any chat
2019-02-18 23:23:45,814 - telethon.crypto.aes - INFO - cryptg detected, it will be used for encryption
2019-02-18 23:23:47,572 - tg_companion - INFO - MODULES to load: ['afk', 'chats', 'github', 'global_bans', 'global_notes', 'migrate', 'misc', 'private_msg', 'profanity_filter', 'profile', 'stats', 'terminals'] 
2019-02-18 23:23:47,573 - tg_companion - INFO - Loading Plugin: getinstalledplugins
2019-02-18 23:23:49,799 - tg_companion - INFO - Starting TelegramCompanion
2019-02-18 23:23:49,844 - telethon.network.mtprotosender - INFO - Connecting to 149.154.167.92:443/TcpFull...
2019-02-18 23:23:49,995 - telethon.network.mtprotosender - INFO - Connection to 149.154.167.92:443/TcpFull complete!
2019-02-18 23:23:50,604 - tg_companion - INFO - Connected!!
2019-02-18 23:24:02,535 - tg_companion - INFO - Your userbot is running. Type .version in any chat to test it
2019-02-18 23:24:03,617 - tg_companion - INFO - Updating Stats...
2019-02-18 23:24:03,617 - tg_companion - INFO - The companion may not respond to your command for 5 second. Don't panic and try again if your command didn't worked
                                                                               N/A% (0 of 49) |                         | Elapsed Time: 0:00:00 ETA:  --:--:--                                                                               100% (49 of 49) |########################| Elapsed Time: 0:00:06 Time:  0:00:06
2019-02-18 23:24:45,410 - telethon.client.users - INFO - Sleeping for 8s on flood wait
2019-02-18 23:25:14,480 - telethon.client.users - INFO - Sleeping for 9s on flood wait
2019-02-18 23:25:44,611 - tg_companion - INFO - DONE!! You can see your stats by sending .stats in any chat
2019-02-18 23:41:11,302 - telethon.network.mtprotosender - INFO - Disconnecting from 149.154.167.92:443/TcpFull...
2019-02-18 23:41:11,303 - telethon.network.mtprotosender - INFO - Disconnection from 149.154.167.92:443/TcpFull complete!
Traceback (most recent call last):
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/telethon/client/updates.py", line 34, in run_until_disconnected
    return self.loop.run_until_complete(self.disconnected)
  File "/usr/lib/python3.7/asyncio/base_events.py", line 571, in run_until_complete
    self.run_forever()
  File "/usr/lib/python3.7/asyncio/base_events.py", line 539, in run_forever
    self._run_once()
  File "/usr/lib/python3.7/asyncio/base_events.py", line 1739, in _run_once
    event_list = self._selector.select(timeout)
  File "/usr/lib/python3.7/selectors.py", line 468, in select
    fd_event_list = self._selector.poll(timeout, max_ev)
KeyboardInterrupt

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1236, in _execute_context
    cursor, statement, parameters, context
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/engine/default.py", line 536, in do_execute
    cursor.execute(statement, parameters)
psycopg2.ProgrammingError: column "date" is of type timestamp without time zone but expression is of type numeric
LINE 1: ...unread_count) VALUES ('tg_userbot', 0, 233043, 0, 1550526058...
                                                             ^
HINT:  You will need to rewrite or cast the expression.


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/usr/lib/python3.7/runpy.py", line 193, in _run_module_as_main
    "__main__", mod_spec)
  File "/usr/lib/python3.7/runpy.py", line 85, in _run_code
    exec(code, run_globals)
  File "/home/nitan_marcel/TelegramCompanion/tg_companion/__main__.py", line 66, in <module>
    client.run_until_disconnected()
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/telethon/client/updates.py", line 36, in run_until_disconnected
    self.disconnect()
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/telethon/client/telegrambaseclient.py", line 379, in disconnect
    self.session.set_update_state(0, self._state)
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/alchemysession/orm.py", line 63, in set_update_state
    self.save()
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/alchemysession/orm.py", line 82, in save
    self.container.save()
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/alchemysession/sqlalchemy.py", line 162, in save
    self.db.commit()
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/orm/scoping.py", line 162, in do
    return getattr(self.registry(), name)(*args, **kwargs)
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 1023, in commit
    self.transaction.commit()
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 487, in commit
    self._prepare_impl()
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 466, in _prepare_impl
    self.session.flush()
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 2436, in flush
    self._flush(objects)
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 2574, in _flush
    transaction.rollback(_capture_exception=True)
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/util/langhelpers.py", line 67, in __exit__
    compat.reraise(exc_type, exc_value, exc_tb)
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/util/compat.py", line 277, in reraise
    raise value
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 2534, in _flush
    flush_context.execute()
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/orm/unitofwork.py", line 416, in execute
    rec.execute(self)
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/orm/unitofwork.py", line 583, in execute
    uow,
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/orm/persistence.py", line 245, in save_obj
    insert,
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/orm/persistence.py", line 1063, in _emit_insert_statements
    c = cached_connections[connection].execute(statement, multiparams)
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 980, in execute
    return meth(self, multiparams, params)
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/sql/elements.py", line 273, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1099, in _execute_clauseelement
    distilled_params,
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1240, in _execute_context
    e, statement, parameters, cursor, context
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1458, in _handle_dbapi_exception
    util.raise_from_cause(sqlalchemy_exception, exc_info)
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/util/compat.py", line 296, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb, cause=cause)
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/util/compat.py", line 276, in reraise
    raise value.with_traceback(tb)
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1236, in _execute_context
    cursor, statement, parameters, context
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/engine/default.py", line 536, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.ProgrammingError) column "date" is of type timestamp without time zone but expression is of type numeric
LINE 1: ...unread_count) VALUES ('tg_userbot', 0, 233043, 0, 1550526058...
                                                             ^
HINT:  You will need to rewrite or cast the expression.
 [SQL: 'INSERT INTO update_state (session_id, entity_id, pts, qts, date, seq, unread_count) VALUES (%(session_id)s, %(entity_id)s, %(pts)s, %(qts)s, %(date)s, %(seq)s, %(unread_count)s)'] [parameters: {'session_id': 'tg_userbot', 'entity_id': 0, 'pts': 233043, 'qts': 0, 'date': 1550526058.0, 'seq': 0, 'unread_count': 17}] (Background on this error at: http://sqlalche.me/e/f405)
Counting your chats...
2019-02-18 23:45:46,094 - telethon.crypto.aes - INFO - cryptg detected, it will be used for encryption
2019-02-18 23:45:46,264 - tg_companion - INFO - MODULES to load: ['afk', 'chats', 'github', 'global_bans', 'global_notes', 'migrate', 'misc', 'private_msg', 'profanity_filter', 'profile', 'stats', 'terminals'] 
2019-02-18 23:45:46,265 - tg_companion - INFO - Loading Plugin: getinstalledplugins
2019-02-18 23:45:47,225 - tg_companion - INFO - Starting TelegramCompanion
2019-02-18 23:45:47,270 - telethon.network.mtprotosender - INFO - Connecting to 149.154.167.92:443/TcpFull...
2019-02-18 23:45:47,420 - telethon.network.mtprotosender - INFO - Connection to 149.154.167.92:443/TcpFull complete!
2019-02-18 23:45:48,027 - tg_companion - INFO - Connected!!
2019-02-18 23:45:53,213 - tg_companion - INFO - Your userbot is running. Type .version in any chat to test it
2019-02-18 23:45:54,224 - tg_companion - INFO - Updating Stats...
2019-02-18 23:45:54,225 - tg_companion - INFO - The companion may not respond to your command for 5 second. Don't panic and try again if your command didn't worked
                                                                               N/A% (0 of 49) |                         | Elapsed Time: 0:00:00 ETA:  --:--:--                                                                               100% (49 of 49) |########################| Elapsed Time: 0:00:06 Time:  0:00:06
2019-02-18 23:46:33,072 - telethon.client.users - INFO - Sleeping for 11s on flood wait
2019-02-18 23:47:04,187 - telethon.client.users - INFO - Sleeping for 10s on flood wait
2019-02-18 23:47:34,398 - tg_companion - INFO - DONE!! You can see your stats by sending .stats in any chat
2019-02-18 23:57:59,578 - telethon.network.mtprotosender - INFO - Disconnecting from 149.154.167.92:443/TcpFull...
2019-02-18 23:57:59,579 - telethon.network.mtprotosender - INFO - Disconnection from 149.154.167.92:443/TcpFull complete!
Traceback (most recent call last):
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/telethon/client/updates.py", line 34, in run_until_disconnected
    return self.loop.run_until_complete(self.disconnected)
  File "/usr/lib/python3.7/asyncio/base_events.py", line 571, in run_until_complete
    self.run_forever()
  File "/usr/lib/python3.7/asyncio/base_events.py", line 539, in run_forever
    self._run_once()
  File "/usr/lib/python3.7/asyncio/base_events.py", line 1739, in _run_once
    event_list = self._selector.select(timeout)
  File "/usr/lib/python3.7/selectors.py", line 468, in select
    fd_event_list = self._selector.poll(timeout, max_ev)
KeyboardInterrupt

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1236, in _execute_context
    cursor, statement, parameters, context
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/engine/default.py", line 536, in do_execute
    cursor.execute(statement, parameters)
psycopg2.ProgrammingError: column "date" is of type timestamp without time zone but expression is of type numeric
LINE 1: ...unread_count) VALUES ('tg_userbot', 0, 850088, 0, 1550527075...
                                                             ^
HINT:  You will need to rewrite or cast the expression.


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/usr/lib/python3.7/runpy.py", line 193, in _run_module_as_main
    "__main__", mod_spec)
  File "/usr/lib/python3.7/runpy.py", line 85, in _run_code
    exec(code, run_globals)
  File "/home/nitan_marcel/TelegramCompanion/tg_companion/__main__.py", line 66, in <module>
    client.run_until_disconnected()
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/telethon/client/updates.py", line 36, in run_until_disconnected
    self.disconnect()
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/telethon/client/telegrambaseclient.py", line 379, in disconnect
    self.session.set_update_state(0, self._state)
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/alchemysession/orm.py", line 63, in set_update_state
    self.save()
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/alchemysession/orm.py", line 82, in save
    self.container.save()
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/alchemysession/sqlalchemy.py", line 162, in save
    self.db.commit()
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/orm/scoping.py", line 162, in do
    return getattr(self.registry(), name)(*args, **kwargs)
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 1023, in commit
    self.transaction.commit()
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 487, in commit
    self._prepare_impl()
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 466, in _prepare_impl
    self.session.flush()
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 2436, in flush
    self._flush(objects)
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 2574, in _flush
    transaction.rollback(_capture_exception=True)
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/util/langhelpers.py", line 67, in __exit__
    compat.reraise(exc_type, exc_value, exc_tb)
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/util/compat.py", line 277, in reraise
    raise value
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 2534, in _flush
    flush_context.execute()
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/orm/unitofwork.py", line 416, in execute
    rec.execute(self)
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/orm/unitofwork.py", line 583, in execute
    uow,
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/orm/persistence.py", line 245, in save_obj
    insert,
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/orm/persistence.py", line 1063, in _emit_insert_statements
    c = cached_connections[connection].execute(statement, multiparams)
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 980, in execute
    return meth(self, multiparams, params)
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/sql/elements.py", line 273, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1099, in _execute_clauseelement
    distilled_params,
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1240, in _execute_context
    e, statement, parameters, cursor, context
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1458, in _handle_dbapi_exception
    util.raise_from_cause(sqlalchemy_exception, exc_info)
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/util/compat.py", line 296, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb, cause=cause)
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/util/compat.py", line 276, in reraise
    raise value.with_traceback(tb)
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1236, in _execute_context
    cursor, statement, parameters, context
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/engine/default.py", line 536, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.ProgrammingError) column "date" is of type timestamp without time zone but expression is of type numeric
LINE 1: ...unread_count) VALUES ('tg_userbot', 0, 850088, 0, 1550527075...
                                                             ^
HINT:  You will need to rewrite or cast the expression.
 [SQL: 'INSERT INTO update_state (session_id, entity_id, pts, qts, date, seq, unread_count) VALUES (%(session_id)s, %(entity_id)s, %(pts)s, %(qts)s, %(date)s, %(seq)s, %(unread_count)s)'] [parameters: {'session_id': 'tg_userbot', 'entity_id': 0, 'pts': 850088, 'qts': 0, 'date': 1550527075.0, 'seq': 0, 'unread_count': 17}] (Background on this error at: http://sqlalche.me/e/f405)
Counting your chats...
2019-02-19 00:00:39,366 - telethon.crypto.aes - INFO - cryptg detected, it will be used for encryption
2019-02-19 00:00:41,001 - tg_companion - INFO - MODULES to load: ['afk', 'chats', 'github', 'global_bans', 'global_notes', 'migrate', 'misc', 'private_msg', 'profanity_filter', 'profile', 'stats', 'terminals'] 
2019-02-19 00:00:41,044 - tg_companion - INFO - Loading Plugin: getinstalledplugins
2019-02-19 00:00:43,175 - tg_companion - INFO - Starting TelegramCompanion
2019-02-19 00:00:43,217 - telethon.network.mtprotosender - INFO - Connecting to 149.154.167.92:443/TcpFull...
2019-02-19 00:00:43,364 - telethon.network.mtprotosender - INFO - Connection to 149.154.167.92:443/TcpFull complete!
2019-02-19 00:00:43,971 - tg_companion - INFO - Connected!!
2019-02-19 00:00:55,727 - tg_companion - INFO - Your userbot is running. Type .version in any chat to test it
2019-02-19 00:00:56,796 - tg_companion - INFO - Updating Stats...
2019-02-19 00:00:56,796 - tg_companion - INFO - The companion may not respond to your command for 5 second. Don't panic and try again if your command didn't worked
                                                                               N/A% (0 of 49) |                         | Elapsed Time: 0:00:00 ETA:  --:--:--                                                                               100% (49 of 49) |########################| Elapsed Time: 0:00:06 Time:  0:00:06
2019-02-19 00:01:28,625 - telethon.network.mtprotosender - INFO - Disconnecting from 149.154.167.92:443/TcpFull...
2019-02-19 00:01:28,626 - telethon.network.mtprotosender - INFO - Disconnection from 149.154.167.92:443/TcpFull complete!
Traceback (most recent call last):
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/telethon/client/updates.py", line 34, in run_until_disconnected
    return self.loop.run_until_complete(self.disconnected)
  File "/usr/lib/python3.7/asyncio/base_events.py", line 571, in run_until_complete
    self.run_forever()
  File "/usr/lib/python3.7/asyncio/base_events.py", line 539, in run_forever
    self._run_once()
  File "/usr/lib/python3.7/asyncio/base_events.py", line 1775, in _run_once
    handle._run()
  File "/usr/lib/python3.7/asyncio/events.py", line 88, in _run
    self._context.run(self._callback, *self._args)
  File "/home/nitan_marcel/TelegramCompanion/tg_companion/tgclient.py", line 209, in wrapper
    await fcn()
  File "/home/nitan_marcel/TelegramCompanion/tg_companion/tgclient.py", line 222, in wrapper
    return await func(*args, **kwds)
  File "/home/nitan_marcel/TelegramCompanion/tg_companion/modules/stats.py", line 224, in GetStats
    msgs = await client.get_messages(ent, limit=0)
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/telethon/client/messages.py", line 364, in get_messages
    async for x in self.iter_messages(*args, **kwargs):
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/async_generator/_impl.py", line 366, in step
    return await ANextIter(self._it, start_fn, *args)
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/async_generator/_impl.py", line 199, in __next__
    return self._invoke(self._it.__next__)
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/async_generator/_impl.py", line 209, in _invoke
    result = fn(*args)
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/telethon/client/messages.py", line 240, in iter_messages
    result = await self(request)
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/telethon/client/users.py", line 60, in __call__
    self.session.process_entities(result)
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/alchemysession/orm.py", line 106, in process_entities
    self.save()
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/alchemysession/orm.py", line 82, in save
    self.container.save()
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/alchemysession/sqlalchemy.py", line 162, in save
    self.db.commit()
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/orm/scoping.py", line 162, in do
    return getattr(self.registry(), name)(*args, **kwargs)
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 1023, in commit
    self.transaction.commit()
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 491, in commit
    t[1].commit()
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1708, in commit
    self._do_commit()
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1739, in _do_commit
    self.connection._commit_impl()
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 755, in _commit_impl
    self._handle_dbapi_exception(e, None, None, None, None)
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1460, in _handle_dbapi_exception
    util.reraise(*exc_info)
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/util/compat.py", line 277, in reraise
    raise value
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 753, in _commit_impl
    self.engine.dialect.do_commit(self.connection)
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/engine/default.py", line 489, in do_commit
    dbapi_connection.commit()
KeyboardInterrupt

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/lib/python3.7/runpy.py", line 193, in _run_module_as_main
    "__main__", mod_spec)
  File "/usr/lib/python3.7/runpy.py", line 85, in _run_code
    exec(code, run_globals)
  File "/home/nitan_marcel/TelegramCompanion/tg_companion/__main__.py", line 66, in <module>
    client.run_until_disconnected()
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/telethon/client/updates.py", line 36, in run_until_disconnected
    self.disconnect()
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/telethon/client/telegrambaseclient.py", line 379, in disconnect
    self.session.set_update_state(0, self._state)
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/alchemysession/orm.py", line 62, in set_update_state
    unread_count=row.unread_count))
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/orm/scoping.py", line 162, in do
    return getattr(self.registry(), name)(*args, **kwargs)
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 2077, in merge
    _resolve_conflict_map=_resolve_conflict_map,
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 2143, in _merge
    merged = self.query(mapper.class_).get(key[1])
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 936, in get
    return self._get_impl(ident, loading.load_on_pk_identity)
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 1026, in _get_impl
    return db_load_fn(self, primary_key_identity)
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/orm/loading.py", line 282, in load_on_pk_identity
    return q.one()
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 3039, in one
    ret = self.one_or_none()
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 3008, in one_or_none
    ret = list(self)
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 3081, in __iter__
    return self._execute_and_instances(context)
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 3103, in _execute_and_instances
    querycontext, self._connection_from_session, close_with_result=True
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 3111, in _get_bind_args
    mapper=self._bind_mapper(), clause=querycontext.statement, **kw
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 3096, in _connection_from_session
    conn = self.session.connection(**kw)
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 1120, in connection
    execution_options=execution_options,
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 1126, in _connection_for_bind
    engine, execution_options
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 401, in _connection_for_bind
    self._assert_active()
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 276, in _assert_active
    "This session is in 'prepared' state; no further "
sqlalchemy.exc.InvalidRequestError: This session is in 'prepared' state; no further SQL can be emitted within this transaction.
Counting your chats...
2019-02-19 00:01:29,414 - asyncio - ERROR - Task exception was never retrieved
future: <Task finished coro=<CompanionClient.on_timer.<locals>.decorator.<locals>.wrapper() done, defined at /home/nitan_marcel/TelegramCompanion/tg_companion/tgclient.py:203> exception=KeyboardInterrupt()>
Traceback (most recent call last):
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/telethon/client/updates.py", line 34, in run_until_disconnected
    return self.loop.run_until_complete(self.disconnected)
  File "/usr/lib/python3.7/asyncio/base_events.py", line 571, in run_until_complete
    self.run_forever()
  File "/usr/lib/python3.7/asyncio/base_events.py", line 539, in run_forever
    self._run_once()
  File "/usr/lib/python3.7/asyncio/base_events.py", line 1775, in _run_once
    handle._run()
  File "/usr/lib/python3.7/asyncio/events.py", line 88, in _run
    self._context.run(self._callback, *self._args)
  File "/home/nitan_marcel/TelegramCompanion/tg_companion/tgclient.py", line 209, in wrapper
    await fcn()
  File "/home/nitan_marcel/TelegramCompanion/tg_companion/tgclient.py", line 222, in wrapper
    return await func(*args, **kwds)
  File "/home/nitan_marcel/TelegramCompanion/tg_companion/modules/stats.py", line 224, in GetStats
    msgs = await client.get_messages(ent, limit=0)
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/telethon/client/messages.py", line 364, in get_messages
    async for x in self.iter_messages(*args, **kwargs):
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/async_generator/_impl.py", line 366, in step
    return await ANextIter(self._it, start_fn, *args)
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/async_generator/_impl.py", line 199, in __next__
    return self._invoke(self._it.__next__)
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/async_generator/_impl.py", line 209, in _invoke
    result = fn(*args)
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/telethon/client/messages.py", line 240, in iter_messages
    result = await self(request)
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/telethon/client/users.py", line 60, in __call__
    self.session.process_entities(result)
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/alchemysession/orm.py", line 106, in process_entities
    self.save()
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/alchemysession/orm.py", line 82, in save
    self.container.save()
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/alchemysession/sqlalchemy.py", line 162, in save
    self.db.commit()
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/orm/scoping.py", line 162, in do
    return getattr(self.registry(), name)(*args, **kwargs)
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 1023, in commit
    self.transaction.commit()
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 491, in commit
    t[1].commit()
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1708, in commit
    self._do_commit()
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1739, in _do_commit
    self.connection._commit_impl()
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 755, in _commit_impl
    self._handle_dbapi_exception(e, None, None, None, None)
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1460, in _handle_dbapi_exception
    util.reraise(*exc_info)
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/util/compat.py", line 277, in reraise
    raise value
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 753, in _commit_impl
    self.engine.dialect.do_commit(self.connection)
  File "/home/nitan_marcel/.local/lib/python3.7/site-packages/sqlalchemy/engine/default.py", line 489, in do_commit
    dbapi_connection.commit()
KeyboardInterrupt
